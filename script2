from selenium import webdriver
from selenium.webdriver.support.ui import Select
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time
import pandas as pd

caps = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

# Set the path to your web driver executable (e.g., chromedriver)
driver_path = 'path_to_chromedriver.exe'

# Initialize a Chrome driver
driver = webdriver.Chrome()

# Open the URL
url = 'https://www.espn.com/nba/boxscore/_/gameId/401584690'
driver.get(url)

# Wait for a few seconds to allow the page to load (you can adjust this time as needed)
driver.implicitly_wait(2)
players = []

try:
    # Find the player name elements by their class name (you might need to inspect the page to get the correct class name)
    player_name_elements = driver.find_elements(By.CLASS_NAME, "Table__TD")
    big_lst = []
    # Extract and print the player names
    for element in player_name_elements:
        player_name = element.text
        if player_name:
            #print(player_name)
            if player_name[0] in caps and '.' in player_name:
                slash_index = player_name.find("\n")
                players.append(player_name[:slash_index])
        big_lst.append(player_name)
        print(big_lst)
    #this could export to a text file
    # print(players)
    # with open('output.txt', 'w') as f:
    #     f.write(' '.join(players))
    data = {'players': players}
    df = pd.DataFrame(data)
    print(df)


except Exception as e:
    print("An error occurred:", str(e))

finally:
    # Close the browser
    driver.quit()